<div class="spam">
    <p>
      This page demonstrates the official <strong>React.js</strong> tutorial
      converted to ClojureScript. 
       Nothing has been added to the original, except for the
       core <strong>Om</strong> library itself. However, the original tutorial
       used two vanilla JavaScript libraries that have been changed to their
       ClojureScript equivalents: <strong>markdown-clj</strong> instead of
      <em>Showdown</em> and <strong>cljs-http</strong> instead of <em>jQuery</em>.
     </p>
     <p>
      I used <strong>jalehman's</strong>
      <a href="https://github.com/jalehman/react-tutorial-om">react-tutorial-om</a>,
      as the basis for this page, but it contains some significant anomalies and
      did not work out of the box originally. For example, there is some
      obsolete syntax from very early <strong>om</strong> releases, some
      confusion over when to use <em>om/update!</em>
      versus <em>om/transact!</em>, and some unecessary imports (i.e.
      the <em>secretary</em> library). Cleaning up all of those anomalies by
      poring over the error messages and the <em>Om</em> source code was a
      worthwhile learning experience.
    </p>

    <p>
      Note one of the neatest tricks I've learned from this has to do with
      dealing with external libraries in your ClojureScript projects. Normally,
      this results in two extra tasks: the main page must include
      a <code>&lt;script&gt;</code> tag explicitly loading the external library,
      <strong>and</strong> your <code>project.clj</code> file must include a 
      special <em>externs</em> file, telling the Google Closure Compiler which
      names to leave unmunged. The former is just a minor ugliness in the HTML
      source, but the latter can be difficult, because only the most popular
      libraries have published, readily-available externs files.
    </p>
    <p>
      But it turns out that you can get around <strong>both</strong> problems
      from inside <strong><code>project.clj</code></strong>. If you specify the external
      file as part of the <strong><code>:preamble</code></strong>, it will
      be concatenated onto the front of your main compiled Javascript file. 
      And you can use the exact same file <em>as the externs file</em> by 
      including as a target inside <strong><code>:externs</code></strong>.
    </p>
    <p>
       This kills off two irritations in one fell swoop. You end up with one and
     only one final JavaScript file (which is better for the user most of the
     time). Better yet, because the external library acts as its
     own externs file, <em>it is 100% guaranteed to be comprehensive, correct, 
     and up-to-date</em>. In
     retrospect, this seems like a forehead-slapping <strong>doh</strong>
     moment. Why would you <em>ever</em> want a special
     truncated <em>externs</em> file, when you always, by definition, have 
     access to a complete file that the compiler can use just as easily? The
     <em>externs</em> file is only used during compilation, so the final file
     is the exact same size in either case. The only real consequence is that
     compilation times rise by a split second or so.
    </p>
    <p> 
      See <code>project.cljs</code> for this project for sample code. Note that
      you do need to put a copy of the external library (in this
      case, <code>react</code>) inside the <code>src</code> directory somewhere, 
      as opposed to only having it inside the <code>resources/public</code>
      directory. You probably don't want external libraries to be in your version
      control, but you can easily micromanage that inside
      your <code>.gitignore</code>. Finally, you will want to use (for example)
      <em>react.js</em> in your <strong>:cljsbuild</strong> <em>dev</em>
      profile, and save <em>react.min.js</em> for your <em>prod</em> profile,
      so that your dev environment gets sensible error messages. 
    </p>




    <!-- the primary target for the main react command -->
    <div id="app-main-div"></div>

    <script src="/js/react.js"></script>   
    <!-- Demonstrates that *file names* use underscores, not dashes.
         No surprise here, since this is explicit in project.clj. -->
    <script src="/js/clui_om.js"></script>
    <!-- Demonstrates that JavaScript *namespaces* also use underscores.
         The *only* place for dashes is inside CLJS source files! -->
    <script>clui_om.react_om_tut.initialize()</script>
</div>
